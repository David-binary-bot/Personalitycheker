<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personality Analyzer Pro üîÆ | Discover Your Celebrity Match!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Comic+Neue:wght@400;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #8A2BE2;
            --secondary: #FF6B6B;
            --accent: #4ECDC4;
            --dark: #2D3047;
            --light: #F7FFF7;
            --gradient: linear-gradient(135deg, #8A2BE2 0%, #FF6B6B 50%, #4ECDC4 100%);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(78, 205, 196, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            background: var(--gradient);
            opacity: 0.1;
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(50px, 50px) rotate(90deg); }
            50% { transform: translate(0, 100px) rotate(180deg); }
            75% { transform: translate(-50px, 50px) rotate(270deg); }
        }

        header {
            text-align: center;
            padding: 30px 20px 50px;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        h1 {
            font-size: 3.8rem;
            font-family: 'Fredoka One', cursive;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
            background: linear-gradient(to right, #FFD700, #FF6B6B, #8A2BE2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto 30px;
            color: #a0a0ff;
        }

        .name-input-section {
            background: rgba(45, 48, 71, 0.7);
            padding: 20px;
            border-radius: 20px;
            max-width: 500px;
            margin: 0 auto 30px;
            border: 2px solid var(--primary);
            backdrop-filter: blur(10px);
        }

        .name-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .name-input i {
            font-size: 1.5rem;
            color: var(--accent);
        }

        #userName {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        #userName:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
            margin-bottom: 50px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(45, 48, 71, 0.8);
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(10px);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(78, 205, 196, 0.3);
        }

        .section-title i {
            font-size: 2rem;
        }

        .upload-area {
            border: 3px dashed var(--accent);
            border-radius: 20px;
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(78, 205, 196, 0.05);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }

        .upload-area:hover::before {
            left: 100%;
        }

        .upload-area:hover {
            background: rgba(78, 205, 196, 0.1);
            border-color: var(--primary);
        }

        .upload-area i {
            font-size: 5rem;
            margin-bottom: 20px;
            color: var(--accent);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .upload-area h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: white;
        }

        .upload-area p {
            color: #a0a0ff;
            font-size: 1.1rem;
        }

        #photoPreview {
            width: 100%;
            max-height: 350px;
            object-fit: cover;
            border-radius: 15px;
            margin-top: 20px;
            border: 3px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        button {
            padding: 18px 25px;
            border: none;
            border-radius: 15px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .primary-btn {
            background: var(--gradient);
            color: white;
            box-shadow: 0 10px 20px rgba(138, 43, 226, 0.3);
        }

        .primary-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(138, 43, 226, 0.4);
        }

        .secondary-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid var(--accent);
        }

        .secondary-btn:hover {
            background: rgba(78, 205, 196, 0.2);
            transform: translateY(-5px);
        }

        .analyzing {
            display: none;
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent);
        }

        .analyzing i {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 20px;
            animation: spin 1.5s linear infinite;
        }

        .results-container {
            position: relative;
        }

        .celebrity-match {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(138, 43, 226, 0.1));
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid var(--secondary);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(255, 107, 107, 0.3); }
            to { box-shadow: 0 0 40px rgba(255, 107, 107, 0.6); }
        }

        .celebrity-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .celebrity-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--accent);
            object-fit: cover;
        }

        .celebrity-name {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .match-percentage {
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent);
            text-align: center;
            margin: 10px 0;
        }

        .match-reason {
            color: #a0a0ff;
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .traits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .trait-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            position: relative;
            overflow: hidden;
        }

        .trait-card:hover {
            transform: rotateY(10deg) scale(1.05);
        }

        .trait-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--accent);
        }

        .trait-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: white;
        }

        .trait-text {
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
        }

        .results-details {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--accent);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .detail-value {
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .share-section {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(78, 205, 196, 0.2));
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            text-align: center;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .share-btn {
            padding: 15px 30px;
            border-radius: 50px;
            color: white;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 180px;
            justify-content: center;
            font-size: 1.1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .share-btn.whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }

        .share-btn.twitter {
            background: linear-gradient(135deg, #1DA1F2, #0d8bd9);
        }

        .share-btn.facebook {
            background: linear-gradient(135deg, #4267B2, #365899);
        }

        .share-btn.link {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .history-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: rgba(30, 33, 57, 0.95);
            backdrop-filter: blur(20px);
            padding: 30px;
            overflow-y: auto;
            transition: right 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            border-left: 4px solid var(--accent);
        }

        .history-panel.active {
            right: 0;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .close-history {
            background: var(--secondary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(138, 43, 226, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }

        .history-item:hover {
            background: rgba(138, 43, 226, 0.2);
            transform: translateX(10px);
        }

        .history-name {
            color: var(--accent);
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .history-date {
            color: #a0a0ff;
            font-size: 0.9rem;
        }

        .sound-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.8rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: transform 0.3s;
        }

        .sound-toggle:hover {
            transform: scale(1.1);
        }

        .sound-toggle.muted {
            opacity: 0.5;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #a0a0ff;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 50px;
        }

        .feature-tag {
            display: inline-block;
            background: var(--gradient);
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            margin: 10px 5px;
            font-weight: 600;
            animation: floatTag 3s infinite ease-in-out;
        }

        @keyframes floatTag {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .loading-bar {
            width: 0%;
            height: 5px;
            background: var(--gradient);
            border-radius: 5px;
            margin: 20px auto;
            transition: width 2s;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-elements">
        <div class="floating-element" style="width: 100px; height: 100px; top: 10%; left: 5%;"></div>
        <div class="floating-element" style="width: 150px; height: 150px; top: 60%; right: 10%;"></div>
        <div class="floating-element" style="width: 80px; height: 80px; bottom: 20%; left: 20%;"></div>
    </div>

    <!-- Sound Toggle -->
    <div class="sound-toggle" id="soundToggle">
        <i class="fas fa-volume-up"></i>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h2><i class="fas fa-history"></i> Analysis History</h2>
            <div class="close-history" id="closeHistory">√ó</div>
        </div>
        <div id="historyList">
            <!-- History items will be added here -->
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-crystal-ball"></i>
                </div>
            </div>
            <h1>PERSONALITY ANALYZER PRO</h1>
            <p class="tagline">Upload your photo to discover your hidden traits and find out which celebrity matches your personality!</p>
            
            <div class="name-input-section">
                <div class="name-input">
                    <i class="fas fa-user-circle"></i>
                    <input type="text" id="userName" placeholder="Enter your name for personalized results..." maxlength="30">
                </div>
            </div>

            <div>
                <span class="feature-tag"><i class="fas fa-star"></i> Celebrity Matches</span>
                <span class="feature-tag"><i class="fas fa-share-alt"></i> Share to WhatsApp</span>
                <span class="feature-tag"><i class="fas fa-volume-up"></i> Sound Effects</span>
                <span class="feature-tag"><i class="fas fa-history"></i> History</span>
            </div>
        </header>

        <div class="main-content">
            <!-- Upload Section -->
            <div class="card">
                <h2 class="section-title"><i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</h2>
                
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-camera"></i>
                    <h3>CLICK OR DRAG & DROP YOUR PHOTO</h3>
                    <p>Supports JPEG, PNG, WebP ‚Ä¢ Max 5MB ‚Ä¢ Your privacy is 100% protected</p>
                    <input type="file" id="photoInput" accept="image/*" style="display: none;">
                </div>
                
                <img id="photoPreview" alt="Your photo preview">
                
                <div class="analyzing" id="analyzingSection">
                    <i class="fas fa-spinner"></i>
                    <h3>ANALYZING PERSONALITY MATRIX...</h3>
                    <p>Scanning facial features ‚Ä¢ Reading energy patterns ‚Ä¢ Calculating celebrity matches</p>
                    <div class="loading-bar" id="loadingBar"></div>
                </div>
                
                <div class="controls">
                    <button class="primary-btn" id="analyzeBtn">
                        <i class="fas fa-brain"></i> ANALYZE NOW
                    </button>
                    <button class="secondary-btn" id="randomPhotoBtn">
                        <i class="fas fa-random"></i> RANDOM PHOTO
                    </button>
                    <button class="secondary-btn" id="resetBtn">
                        <i class="fas fa-redo"></i> RESET ALL
                    </button>
                    <button class="secondary-btn" id="showHistoryBtn">
                        <i class="fas fa-history"></i> VIEW HISTORY
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div class="card results-container">
                <h2 class="section-title"><i class="fas fa-chart-line"></i> PERSONALITY ANALYSIS RESULTS</h2>
                
                <div class="celebrity-match" id="celebrityMatch" style="display: none;">
                    <div class="celebrity-info">
                        <img id="celebrityAvatar" class="celebrity-avatar" alt="Celebrity">
                        <div>
                            <div class="celebrity-name" id="celebrityName">Celebrity Name</div>
                            <div id="celebrityType">YouTuber ‚Ä¢ Actor ‚Ä¢ Singer</div>
                        </div>
                    </div>
                    <div class="match-percentage" id="matchPercentage">85%</div>
                    <div class="match-reason" id="matchReason">Your adventurous spirit and creative energy match perfectly!</div>
                </div>

                <h3 style="margin: 25px 0 15px; color: var(--accent);">
                    <i class="fas fa-gem"></i> YOUR PERSONALITY TRAITS
                </h3>
                
                <div class="traits-grid" id="traitsGrid">
                    <!-- Traits will appear here -->
                </div>

                <div class="results-details">
                    <h3 style="margin-bottom: 20px; color: var(--accent);">
                        <i class="fas fa-chart-pie"></i> ANALYSIS DETAILS
                    </h3>
                    <div id="resultsDetails">
                        <!-- Details will appear here -->
                    </div>
                </div>

                <div class="share-section">
                    <h3><i class="fas fa-share-square"></i> SHARE YOUR RESULTS</h3>
                    <p style="margin: 15px 0; color: #a0a0ff;">
                        Your results are amazing! Share them with friends and see who they match with!
                    </p>
                    <div class="share-buttons">
                        <button class="share-btn whatsapp" id="shareWhatsApp">
                            <i class="fab fa-whatsapp"></i> WHATSAPP
                        </button>
                        <button class="share-btn twitter" id="shareTwitter">
                            <i class="fab fa-twitter"></i> TWITTER
                        </button>
                        <button class="share-btn facebook" id="shareFacebook">
                            <i class="fab fa-facebook-f"></i> FACEBOOK
                        </button>
                        <button class="share-btn link" id="copyLink">
                            <i class="fas fa-link"></i> COPY LINK
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>üîÆ <strong>DISCLAIMER:</strong> This app is for entertainment purposes only. Analysis is randomly generated with fun algorithms.</p>
            <p>Made with <i class="fas fa-heart" style="color: var(--secondary);"></i> ‚Ä¢ No data leaves your device ‚Ä¢ All processing happens locally</p>
            <p style="margin-top: 20px; font-size: 0.9rem;">¬© 2025 Personality Analyzer Pro | All celebrity names are trademarks of their respective owners Ngise Mwas</p>
        </footer>
    </div>

    <!-- Audio Elements -->
    <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
    <audio id="uploadSound" src="https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3"></audio>
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>
    <audio id="celebritySound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    <audio id="traitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>

    <script>
        // Enhanced Personality Analyzer Pro
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize floating elements
            createFloatingElements();
            
            // Load saved history
            loadHistory();
            
            // Set up event listeners
            setupEventListeners();
            
            // Initialize sound system
            initializeSounds();
        });

        // DOM Elements
        const elements = {
            uploadArea: document.getElementById('uploadArea'),
            photoInput: document.getElementById('photoInput'),
            photoPreview: document.getElementById('photoPreview'),
            analyzeBtn: document.getElementById('analyzeBtn'),
            randomPhotoBtn: document.getElementById('randomPhotoBtn'),
            resetBtn: document.getElementById('resetBtn'),
            showHistoryBtn: document.getElementById('showHistoryBtn'),
            analyzingSection: document.getElementById('analyzingSection'),
            loadingBar: document.getElementById('loadingBar'),
            userName: document.getElementById('userName'),
            celebrityMatch: document.getElementById('celebrityMatch'),
            celebrityAvatar: document.getElementById('celebrityAvatar'),
            celebrityName: document.getElementById('celebrityName'),
            matchPercentage: document.getElementById('matchPercentage'),
            matchReason: document.getElementById('matchReason'),
            traitsGrid: document.getElementById('traitsGrid'),
            resultsDetails: document.getElementById('resultsDetails'),
            shareWhatsApp: document.getElementById('shareWhatsApp'),
            shareTwitter: document.getElementById('shareTwitter'),
            shareFacebook: document.getElementById('shareFacebook'),
            copyLink: document.getElementById('copyLink'),
            historyPanel: document.getElementById('historyPanel'),
            closeHistory: document.getElementById('closeHistory'),
            historyList: document.getElementById('historyList'),
            soundToggle: document.getElementById('soundToggle')
        };

        // Audio Elements
        const sounds = {
            click: document.getElementById('clickSound'),
            upload: document.getElementById('uploadSound'),
            success: document.getElementById('successSound'),
            celebrity: document.getElementById('celebritySound'),
            trait: document.getElementById('traitSound')
        };

        // Sound System
        let soundEnabled = true;

        function initializeSounds() {
            // Set volume levels
            Object.values(sounds).forEach(sound => {
                if (sound) sound.volume = 0.5;
            });
        }

        function playSound(soundName) {
            if (!soundEnabled) return;
            
            const sound = sounds[soundName];
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Audio play failed:", e));
            }
        }

        // Enhanced Celebrities Database
        const celebrities = {
            youtubers: [
                { 
                    name: "MrBeast", 
                    type: "YouTuber", 
                    avatar: "https://i.pravatar.cc/150?img=1",
                    traits: ["Extremely Generous", "Risk-Taker", "Creative Visionary", "Business Savvy"],
                    reasons: [
                        "Your generosity and willingness to help others is extraordinary!",
                        "You have the creativity to turn ideas into viral sensations!",
                        "Your ambitious projects and dedication to success are unmatched!"
                    ]
                },
                { 
                    name: "PewDiePie", 
                    type: "YouTuber", 
                    avatar: "https://i.pravatar.cc/150?img=2",
                    traits: ["Authentic", "Humor Master", "Trendsetter", "Resilient"],
                    reasons: [
                        "Your authentic personality and sense of humor shine through!",
                        "You have the charisma to build a massive following!",
                        "Your ability to stay relevant for years is impressive!"
                    ]
                },
                { 
                    name: "Markiplier", 
                    type: "YouTuber", 
                    avatar: "https://i.pravatar.cc/150?img=3",
                    traits: ["Energetic", "Charismatic", "Creative", "Philanthropist"],
                    reasons: [
                        "Your high energy and charisma light up any room!",
                        "You have the creativity to entertain millions!",
                        "Your charitable nature makes a real difference!"
                    ]
                }
            ],
            singers: [
                { 
                    name: "Ariana Grande", 
                    type: "Singer", 
                    avatar: "https://i.pravatar.cc/150?img=4",
                    traits: ["Powerful Voice", "Fashion Icon", "Resilient", "Empathetic"],
                    reasons: [
                        "Your powerful presence and emotional depth are remarkable!",
                        "You have the style and grace of a true icon!",
                        "Your resilience in facing challenges is inspiring!"
                    ]
                },
                { 
                    name: "Taylor Swift", 
                    type: "Singer", 
                    avatar: "https://i.pravatar.cc/150?img=5",
                    traits: ["Storyteller", "Business Genius", "Loyal", "Strategic"],
                    reasons: [
                        "Your storytelling ability and emotional intelligence are exceptional!",
                        "You have the business acumen to build an empire!",
                        "Your attention to detail and strategic thinking are impressive!"
                    ]
                },
                { 
                    name: "The Weeknd", 
                    type: "Singer", 
                    avatar: "https://i.pravatar.cc/150?img=6",
                    traits: ["Mysterious", "Innovative", "Ambitious", "Trendsetter"],
                    reasons: [
                        "Your mysterious aura and unique style set you apart!",
                        "You have the innovation to redefine genres!",
                        "Your ambition drives you to achieve greatness!"
                    ]
                }
            ],
            actors: [
                { 
                    name: "Dwayne 'The Rock' Johnson", 
                    type: "Actor", 
                    avatar: "https://i.pravatar.cc/150?img=7",
                    traits: ["Disciplined", "Motivational", "Charismatic", "Hard-working"],
                    reasons: [
                        "Your discipline and work ethic are truly inspirational!",
                        "You have the charisma to command any room!",
                        "Your motivational spirit lifts everyone around you!"
                    ]
                },
                { 
                    name: "Emma Watson", 
                    type: "Actor", 
                    avatar: "https://i.pravatar.cc/150?img=8",
                    traits: ["Intelligent", "Activist", "Elegant", "Role Model"],
                    reasons: [
                        "Your intelligence and grace are truly admirable!",
                        "You have the passion to make a difference in the world!",
                        "Your elegance and poise are remarkable!"
                    ]
                },
                { 
                    name: "Tom Holland", 
                    type: "Actor", 
                    avatar: "https://i.pravatar.cc/150?img=9",
                    traits: ["Energetic", "Humorous", "Talented", "Down-to-earth"],
                    reasons: [
                        "Your energetic and humorous personality is contagious!",
                        "You have incredible talent while staying humble!",
                        "Your authenticity makes you universally loved!"
                    ]
                }
            ]
        };

        // Enhanced Traits Database
        const enhancedTraits = {
            dominant: [
                { text: "Natural Leader üèÜ", icon: "fas fa-crown", color: "#FFD700" },
                { text: "Creative Genius üé®", icon: "fas fa-palette", color: "#FF6B6B" },
                { text: "Empathetic Soul ‚ù§Ô∏è", icon: "fas fa-heart", color: "#FF4757" },
                { text: "Analytical Mind üß†", icon: "fas fa-brain", color: "#2ED573" },
                { text: "Adventurous Spirit üåç", icon: "fas fa-globe-americas", color: "#1E90FF" },
                { text: "Charismatic Magnet ‚ú®", icon: "fas fa-magic", color: "#8A2BE2" }
            ],
            personality: [
                { text: "Optimistic Visionary üåà", icon: "fas fa-sun", color: "#FFA502" },
                { text: "Deep Thinker ü§î", icon: "fas fa-search", color: "#747D8C" },
                { text: "Spontaneous Thrill-Seeker ‚ö°", icon: "fas fa-bolt", color: "#FFD32A" },
                { text: "Resilient Warrior üõ°Ô∏è", icon: "fas fa-shield-alt", color: "#3742FA" },
                { text: "Calm Stabilizer ‚öñÔ∏è", icon: "fas fa-balance-scale", color: "#2ED573" },
                { text: "Passionate Firebrand üî•", icon: "fas fa-fire", color: "#FF6B6B" }
            ],
            hidden: [
                { text: "Secret Musical Talent üéµ", icon: "fas fa-music", color: "#8A2BE2" },
                { text: "Photographic Memory üì∏", icon: "fas fa-camera", color: "#1E90FF" },
                { text: "Polyglot Potential üó£Ô∏è", icon: "fas fa-language", color: "#2ED573" },
                { text: "Eagle-Eye Detail Spotter üëÅÔ∏è", icon: "fas fa-eye", color: "#FFA502" },
                { text: "Superhuman Patience üßò", icon: "fas fa-hourglass-half", color: "#747D8C" },
                { text: "Uncanny Problem-Solver üß©", icon: "fas fa-puzzle-piece", color: "#FF6B6B" }
            ],
            quirks: [
                { text: "Laughs Like Happy Dolphin üê¨", icon: "fas fa-laugh", color: "#1E90FF" },
                { text: "Can Identify Any Spice üå∂Ô∏è", icon: "fas fa-pepper-hot", color: "#FF4757" },
                { text: "Dances When Thinking üíÉ", icon: "fas fa-music", color: "#8A2BE2" },
                { text: "Talks to Plants (They Listen) üå±", icon: "fas fa-leaf", color: "#2ED573" },
                { text: "Collects Oddly Specific Things üè∫", icon: "fas fa-collection", color: "#FFA502" },
                { text: "Makes Up Songs for Chores üé§", icon: "fas fa-microphone", color: "#FF6B6B" }
            ]
        };

        // Analysis History
        let analysisHistory = [];

        // Create Floating Background Elements
        function createFloatingElements() {
            const container = document.querySelector('.floating-elements');
            for (let i = 0; i < 8; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.style.width = `${Math.random() * 80 + 40}px`;
                element.style.height = element.style.width;
                element.style.top = `${Math.random() * 100}%`;
                element.style.left = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.animationDuration = `${Math.random() * 30 + 20}s`;
                container.appendChild(element);
            }
        }

        // Event Listeners Setup
        function setupEventListeners() {
            // Upload area interactions
            elements.uploadArea.addEventListener('click', () => {
                playSound('click');
                elements.photoInput.click();
            });

            elements.uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                elements.uploadArea.style.transform = 'scale(1.02)';
            });

            elements.uploadArea.addEventListener('dragleave', () => {
                elements.uploadArea.style.transform = 'scale(1)';
            });

            elements.uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                elements.uploadArea.style.transform = 'scale(1)';
                if (e.dataTransfer.files.length) {
                    elements.photoInput.files = e.dataTransfer.files;
                    handleImageUpload();
                }
            });

            // Photo input
            elements.photoInput.addEventListener('change', handleImageUpload);

            // Buttons
            elements.analyzeBtn.addEventListener('click', analyzePhoto);
            elements.randomPhotoBtn.addEventListener('click', useRandomPhoto);
            elements.resetBtn.addEventListener('click', resetApp);
            elements.showHistoryBtn.addEventListener('click', showHistoryPanel);
            elements.closeHistory.addEventListener('click', hideHistoryPanel);

            // Share buttons
            elements.shareWhatsApp.addEventListener('click', shareOnWhatsApp);
            elements.shareTwitter.addEventListener('click', shareOnTwitter);
            elements.shareFacebook.addEventListener('click', shareOnFacebook);
            elements.copyLink.addEventListener('click', copyResultsLink);

            // Sound toggle
            elements.soundToggle.addEventListener('click', toggleSound);

            // Close history panel when clicking outside
            document.addEventListener('click', (e) => {
                if (!elements.historyPanel.contains(e.target) && 
                    e.target !== elements.showHistoryBtn) {
                    hideHistoryPanel();
                }
            });

            // Enter key for name input
            elements.userName.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    playSound('click');
                    if (elements.photoPreview.style.display !== 'none') {
                        analyzePhoto();
                    }
                }
            });
        }

        // Image Upload Handler
        function handleImageUpload() {
            if (elements.photoInput.files && elements.photoInput.files[0]) {
                const file = elements.photoInput.files[0];
                
                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('File is too large! Please choose an image smaller than 5MB.');
                    return;
                }
                
                playSound('upload');
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    elements.photoPreview.src = e.target.result;
                    elements.photoPreview.style.display = 'block';
                    elements.analyzeBtn.disabled = false;
                };
                reader.readAsDataURL(file);
            }
        }

        // Use Random Photo
        function useRandomPhoto() {
            playSound('click');
            const randomId = Math.floor(Math.random() * 1000);
            elements.photoPreview.src = `https://picsum.photos/seed/${randomId}/600/400`;
            elements.photoPreview.style.display = 'block';
            elements.analyzeBtn.disabled = false;
        }

        // Analyze Photo
        function analyzePhoto() {
            const userName = elements.userName.value.trim();
            if (!userName) {
                alert('Please enter your name first!');
                elements.userName.focus();
                return;
            }

            if (!elements.photoInput.files.length && elements.photoPreview.src.includes('placeholder')) {
                alert('Please upload a photo first or use a random photo!');
                return;
            }

            playSound('click');
            
            // Show analyzing animation
            elements.analyzingSection.style.display = 'block';
            elements.loadingBar.style.width = '0%';
            
            // Animate loading bar
            setTimeout(() => elements.loadingBar.style.width = '30%', 300);
            setTimeout(() => elements.loadingBar.style.width = '60%', 800);
            setTimeout(() => elements.loadingBar.style.width = '90%', 1300);
            
            // Simulate analysis time
            setTimeout(() => {
                elements.analyzingSection.style.display = 'none';
                elements.loadingBar.style.width = '100%';
                
                // Generate random celebrity match
                const allCelebrities = [
                    ...celebrities.youtubers,
                    ...celebrities.singers,
                    ...celebrities.actors
                ];
                const celebrity = allCelebrities[Math.floor(Math.random() * allCelebrities.length)];
                
                // Generate random match percentage (70-99%)
                const matchPercent = Math.floor(Math.random() * 30) + 70;
                
                // Select random reason
                const reason = celebrity.reasons[Math.floor(Math.random() * celebrity.reasons.length)];
                
                // Display celebrity match
                elements.celebrityAvatar.src = celebrity.avatar;
                elements.celebrityName.textContent = celebrity.name;
                document.getElementById('celebrityType').textContent = celebrity.type;
                elements.matchPercentage.textContent = `${matchPercent}%`;
                elements.matchReason.textContent = reason;
                elements.celebrityMatch.style.display = 'block';
                
                // Play celebrity match sound
                playSound('celebrity');
                
                // Generate random traits
                const selectedTraits = [];
                Object.values(enhancedTraits).forEach(category => {
                    const shuffled = [...category].sort(() => 0.5 - Math.random());
                    selectedTraits.push(...shuffled.slice(0, 2));
                });
                
                // Shuffle and limit to 8 traits
                const shuffledTraits = selectedTraits.sort(() => 0.5 - Math.random()).slice(0, 8);
                
                // Display traits with animation
                displayTraitsWithAnimation(shuffledTraits);
                
                // Generate and display analysis details
                displayAnalysisDetails(userName, matchPercent, celebrity.name);
                
                // Play success sound
                playSound('success');
                
                // Add to history
                addToHistory(userName, celebrity, matchPercent, shuffledTraits);
                
            }, 2000); // 2 second analysis
        }

        // Display Traits with Animation
        function displayTraitsWithAnimation(traits) {
            elements.traitsGrid.innerHTML = '';
            
            traits.forEach((trait, index) => {
                setTimeout(() => {
                    const traitCard = document.createElement('div');
                    traitCard.className = 'trait-card';
                    traitCard.style.background = `linear-gradient(135deg, ${trait.color}, ${darkenColor(trait.color, 20)})`;
                    
                    traitCard.innerHTML = `
                        <div class="trait-icon">${trait.icon}</div>
                        <div class="trait-text">${trait.text}</div>
                    `;
                    
                    elements.traitsGrid.appendChild(traitCard);
                    playSound('trait');
                }, index * 150);
            });
        }

        // Display Analysis Details
        function displayAnalysisDetails(userName, matchPercent, celebrityName) {
            const details = [
                { label: "Analysis Confidence", value: `${matchPercent}%`, icon: "fas fa-chart-line" },
                { label: "Spirit Animal", value: getRandomSpiritAnimal(), icon: "fas fa-paw" },
                { label: "Aura Color", value: getRandomAuraColor(), icon: "fas fa-circle" },
                { label: "Superpower Match", value: getRandomSuperpower(), icon: "fas fa-bolt" },
                { label: "Life Theme Song", value: getRandomSong(), icon: "fas fa-music" },
                { label: "Compatibility Score", value: `${Math.floor(Math.random() * 30) + 65}%`, icon: "fas fa-heart" },
                { label: "Secret Talent", value: getRandomTalent(), icon: "fas fa-star" },
                { label: "Next Big Adventure", value: getRandomAdventure(), icon: "fas fa-mountain" }
            ];
            
            elements.resultsDetails.innerHTML = '';
            
            details.forEach(detail => {
                const detailRow = document.createElement('div');
                detailRow.className = 'detail-row';
                detailRow.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <i class="${detail.icon}" style="color: var(--accent); font-size: 1.2rem;"></i>
                        <span class="detail-label">${detail.label}</span>
                    </div>
                    <span class="detail-value">${detail.value}</span>
                `;
                elements.resultsDetails.appendChild(detailRow);
            });
        }

        // Add to History
        function addToHistory(userName, celebrity, matchPercent, traits) {
            const historyItem = {
                id: Date.now(),
                userName: userName,
                celebrity: celebrity.name,
                celebrityType: celebrity.type,
                matchPercent: matchPercent,
                traits: traits.map(t => t.text),
                timestamp: new Date().toLocaleString(),
                date: new Date().toISOString().split('T')[0]
            };
            
            analysisHistory.unshift(historyItem);
            
            // Keep only last 20 items
            if (analysisHistory.length > 20) {
                analysisHistory.pop();
            }
            
            // Save to localStorage
            localStorage.setItem('personalityAnalyzerHistory', JSON.stringify(analysisHistory));
            
            // Update history display
            updateHistoryDisplay();
        }

        // Load History
        function loadHistory() {
            const savedHistory = localStorage.getItem('personalityAnalyzerHistory');
            if (savedHistory) {
                analysisHistory = JSON.parse(savedHistory);
                updateHistoryDisplay();
            }
        }

        // Update History Display
        function updateHistoryDisplay() {
            elements.historyList.innerHTML = '';
            
            if (analysisHistory.length === 0) {
                elements.historyList.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #a0a0ff;">
                        <i class="fas fa-history" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>No analysis history yet. Analyze your first photo!</p>
                    </div>
                `;
                return;
            }
            
            analysisHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-name">${item.userName} ‚Üí ${item.celebrity}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: var(--accent); font-weight: 600;">${item.matchPercent}% Match</span>
                        <span class="history-date">${item.timestamp}</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #a0a0ff;">
                        ${item.traits.slice(0, 2).join(' ‚Ä¢ ')}
                    </div>
                `;
                
                historyItem.addEventListener('click', () => {
                    loadHistoryItem(item);
                    hideHistoryPanel();
                });
                
                elements.historyList.appendChild(historyItem);
            });
        }

        // Load History Item
        function loadHistoryItem(item) {
            elements.userName.value = item.userName;
            
            // Create a mock celebrity object
            const mockCelebrity = {
                name: item.celebrity,
                type: item.celebrityType,
                avatar: `https://i.pravatar.cc/150?img=${Math.floor(Math.random() * 10) + 1}`
            };
            
            // Display the saved results
            elements.celebrityAvatar.src = mockCelebrity.avatar;
            elements.celebrityName.textContent = mockCelebrity.name;
            document.getElementById('celebrityType').textContent = mockCelebrity.type;
            elements.matchPercentage.textContent = `${item.matchPercent}%`;
            elements.matchReason.textContent = `History match from ${item.date}`;
            elements.celebrityMatch.style.display = 'block';
            
            // Convert trait strings back to objects
            const mockTraits = item.traits.map(text => ({
                text: text,
                icon: getIconForTrait(text),
                color: getRandomColor()
            }));
            
            displayTraitsWithAnimation(mockTraits.slice(0, 8));
            displayAnalysisDetails(item.userName, item.matchPercent, item.celebrity);
            
            // Show a preview image
            elements.photoPreview.src = `https://picsum.photos/seed/${item.id}/600/400`;
            elements.photoPreview.style.display = 'block';
            
            playSound('success');
        }

        // Share Functions
        function shareOnWhatsApp() {
            const userName = elements.userName.value || "Someone";
            const celebrity = elements.celebrityName.textContent;
            const match = elements.matchPercentage.textContent;
            const traits = Array.from(document.querySelectorAll('.trait-text')).slice(0, 3).map(t => t.textContent).join(', ');
            
            const message = `üé≠ *PERSONALITY ANALYZER PRO RESULTS* üé≠\n\n` +
                           `*${userName}* matches *${match}* with *${celebrity}!* üéâ\n\n` +
                           `‚ú® *Key Traits:* ${traits}\n\n` +
                           `üîÆ *Want to discover your celebrity match?*\n` +
                           `üëâ Click here to try it: ${window.location.href}\n\n` +
                           `*It's FREE, fun, and 100% private!* üöÄ`;
            
            const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        function shareOnTwitter() {
            const userName = elements.userName.value || "Someone";
            const celebrity = elements.celebrityName.textContent;
            const match = elements.matchPercentage.textContent;
            
            const text = `üé≠ I'm ${match} matched with ${celebrity} on Personality Analyzer Pro! ${userName}'s personality traits are amazing! Try it yourself: ${window.location.href} #PersonalityAnalyzer #CelebrityMatch`;
            
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`, '_blank');
        }

        function shareOnFacebook() {
            const url = window.location.href;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }

        function copyResultsLink() {
            const message = `üé≠ *Check out my personality analysis!*\n\n` +
                           `I discovered my celebrity match and hidden traits with Personality Analyzer Pro!\n\n` +
                           `üëâ Try it here: ${window.location.href}\n\n` +
                           `It's completely FREE and private! üîÆ`;
            
            navigator.clipboard.writeText(message).then(() => {
                const originalText = elements.copyLink.innerHTML;
                elements.copyLink.innerHTML = '<i class="fas fa-check"></i> COPIED!';
                setTimeout(() => {
                    elements.copyLink.innerHTML = originalText;
                }, 2000);
            });
        }

        // History Panel Functions
        function showHistoryPanel() {
            playSound('click');
            elements.historyPanel.classList.add('active');
        }

        function hideHistoryPanel() {
            elements.historyPanel.classList.remove('active');
        }

        // Sound Toggle
        function toggleSound() {
            soundEnabled = !soundEnabled;
            elements.soundToggle.classList.toggle('muted', !soundEnabled);
            elements.soundToggle.innerHTML = soundEnabled ? 
                '<i class="fas fa-volume-up"></i>' : 
                '<i class="fas fa-volume-mute"></i>';
        }

        // Reset App
        function resetApp() {
            playSound('click');
            elements.photoPreview.style.display = 'none';
            elements.photoInput.value = '';
            elements.analyzingSection.style.display = 'none';
            elements.celebrityMatch.style.display = 'none';
            elements.userName.value = '';
            elements.traitsGrid.innerHTML = '';
            elements.resultsDetails.innerHTML = '';
            elements.analyzeBtn.disabled = true;
            elements.loadingBar.style.width = '0%';
        }

        // Helper Functions
        function darkenColor(color, percent) {
            // Simple color darkening
            return color;
        }

        function getRandomColor() {
            const colors = ['#8A2BE2', '#FF6B6B', '#4ECDC4', '#FFD700', '#1E90FF', '#2ED573'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function getIconForTrait(trait) {
            if (trait.includes('Leader')) return 'fas fa-crown';
            if (trait.includes('Creative')) return 'fas fa-palette';
            if (trait.includes('Empathetic')) return 'fas fa-heart';
            if (trait.includes('Music')) return 'fas fa-music';
            if (trait.includes('Laugh')) return 'fas fa-laugh';
            return 'fas fa-star';
        }

        function getRandomSpiritAnimal() {
            const animals = ["Majestic Eagle ü¶Ö", "Clever Fox ü¶ä", "Wise Owl ü¶â", "Playful Dolphin üê¨", "Brave Lion ü¶Å", "Graceful Swan ü¶¢"];
            return animals[Math.floor(Math.random() * animals.length)];
        }

        function getRandomAuraColor() {
            const colors = ["Electric Blue ‚ö°", "Golden Sunshine üåû", "Mystic Purple üîÆ", "Fiery Red üî•", "Emerald Green üíé", "Cosmic Pink üåå"];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function getRandomSuperpower() {
            const powers = ["Time Manipulation ‚è≥", "Teleportation ‚ú®", "Mind Reading üß†", "Super Speed üèÉ‚Äç‚ôÇÔ∏è", "Invisibility üëª", "Element Control üåä"];
            return powers[Math.floor(Math.random() * powers.length)];
        }

        function getRandomSong() {
            const songs = ["'Eye of the Tiger' üêØ", "'Dancing Queen' üëë", "'Bohemian Rhapsody' üé§", "'Happy' üòÑ", "'Stronger' üí™", "'Imagine' ‚ú®"];
            return songs[Math.floor(Math.random() * songs.length)];
        }

        function getRandomTalent() {
            const talents = ["Perfect Pitch üéµ", "Photographic Memory üì∏", "Speed Reading üìö", "Master Chef Skills üë®‚Äçüç≥", "Polyglot Abilities üó£Ô∏è", "Eidetic Memory üß†"];
            return talents[Math.floor(Math.random() * talents.length)];
        }

        function getRandomAdventure() {
            const adventures = ["Climb Mount Everest üèîÔ∏è", "Learn 3 New Languages üåç", "Start a YouTube Channel üé•", "Write a Bestseller üìñ", "Visit 7 Wonders ‚úàÔ∏è", "Master a Martial Art ü•ã"];
            return adventures[Math.floor(Math.random() * adventures.length)];
        }

        // Initial setup
        elements.analyzeBtn.disabled = true;
    </script>
</body>
      </html>
